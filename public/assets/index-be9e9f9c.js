import{l as P,a as S,f as j,E as M}from"./index-2b957120.js";import{d as N,b as $,p as I,o as n,I as f,J as p,a as o,m as g,c as U,F as V,U as q,N as b,v as z,q as D}from"./@vue_runtime-core@3.3.2-da3364bd.js";import{r as c,u as a}from"./@vue_reactivity@3.3.2-ae2838a1.js";import{K as F,L as G,y as T,k,M as A,m as E}from"./naive-ui@2.34.3_vue@3.3.2-cf3752ae.js";import{n as J,L as C}from"./@vue_shared@3.3.2-50d8a10d.js";import"./@vue_runtime-dom@3.3.2-7747b59a.js";import"./@iconify_vue@4.1.1_vue@3.3.2-f279cb68.js";import"./pinia@2.1.1_typescript@4.9.5_vue@3.3.2-4b43aa74.js";import"./vue-demi@0.14.4_vue@3.3.2-71ba0ef2.js";import"./crypto-js@4.1.1-7d239ab2.js";import"./@babel_runtime@7.21.5-042e6b4d.js";import"./vue-router@4.2.0_vue@3.3.2-1a885509.js";import"./axios@1.4.0-4a70c6fc.js";import"./@vueuse_core@9.13.0_vue@3.3.2-596ab462.js";import"./@vueuse_shared@9.13.0_vue@3.3.2-e741950b.js";import"./vue-i18n@9.2.2_vue@3.3.2-f6864f94.js";import"./@intlify_shared@9.2.2-6f62a0ce.js";import"./@intlify_core-base@9.2.2-e46b7bcb.js";import"./@intlify_message-compiler@9.2.2-e451351e.js";import"./@intlify_devtools-if@9.2.2-c61c979f.js";import"./element-plus@2.3.4_vue@3.3.2-a565e156.js";import"./lodash-es@4.17.21-811ce8f5.js";import"./@element-plus_icons-vue@2.1.0_vue@3.3.2-9f61c6d4.js";import"./@sxzz_popperjs-es@2.11.7-c75af06c.js";import"./@ctrl_tinycolor@3.6.0-f8748455.js";import"./dayjs@1.11.7-7063ff69.js";import"./async-validator@4.2.5-dee29e8b.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./escape-html@1.0.3-78e42352.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.2.8-946b0ed0.js";import"./@floating-ui_core@1.2.6-614032f8.js";import"./vue3-qrcode@0.0.2_vue@3.3.2-547b044e.js";import"./qrcode@1.5.3-b7eb702b.js";import"./encode-utf8@1.0.3-f813de00.js";import"./dijkstrajs@1.0.3-f906a09e.js";import"./vooks@0.2.12_vue@3.3.2-a672608a.js";import"./evtd@0.2.4-b614532e.js";import"./katex@0.16.7-aa744d12.js";import"./seemly@0.3.6-5600174a.js";import"./treemate@0.3.11-25c27bff.js";import"./vdirs@0.1.8_vue@3.3.2-4519c5fd.js";import"./vueuc@0.4.51_vue@3.3.2-6941250f.js";import"./@css-render_vue3-ssr@0.15.12_vue@3.3.2-811edb7f.js";import"./@juggle_resize-observer@3.4.0-41516555.js";import"./css-render@0.15.12-57b1a53f.js";import"./@emotion_hash@0.8.0-8a8e73f6.js";import"./date-fns@2.30.0-975a2d8f.js";import"./@css-render_plugin-bem@0.15.12_css-render@0.15.12-9dde7ffe.js";const K={class:"p-4 space-y-4"},H={class:"flex justify-center"},O=["src"],Q={class:"flex justify-center"},W={class:"flex justify-center"},X={class:"flex justify-center",style:{"margin-top":"10px"}},Y=N({__name:"PromptsList",emits:["update-prompt"],setup(x,{emit:u}){const m=P(),v=c(m.currentRole),{isMobile:y}=S(),i=c({website:"",register:""}),s=c(!1);async function h(){try{s.value=!0;const{data:r}=await j();i.value=r}finally{s.value=!1}}const d=c();async function L(){try{s.value=!0;const{data:r}=await M();d.value=r;for(let e=0;e<d.value.length;e++)if(d.value[e].id===v.value.id){l.value=e;break}await z(),w()}finally{s.value=!1}}$(()=>{L(),h()});const l=c(-1);function w(){d.value.forEach((r,e)=>{const t=document.querySelector(`.prompt-${e}`);l.value===e?t==null||t.classList.add("selected"):t==null||t.classList.remove("selected")})}I(l,()=>{w(),console.log("selectedCardIndex",l.value)});function R(r,e){u("update-prompt",r.key),m.updateRole(r),l.value=e}function B(){l.value=-1,u("update-prompt",""),console.log("cancelRole"),m.resetRole()}return(r,e)=>(n(),f(a(A),{show:s.value},{default:p(()=>[o("div",K,[g(a(F),{"x-gap":"12",cols:a(y)?2:3,style:{"max-height":"640px","overflow-y":"auto"}},{default:p(()=>[(n(!0),U(V,null,q(d.value,(t,_)=>(n(),f(a(G),{key:_},{default:p(()=>[g(a(T),{style:{"margin-bottom":"10px"},headStyle:{textAlign:"center"},class:J(`prompt-${_}`),hoverable:"",size:"medium"},{default:p(()=>[o("div",H,[o("img",{src:t.icon,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"50%"}},null,8,O)]),o("div",Q,[o("span",null,C(t.key),1)]),o("div",W,[o("span",null,C(t.desc),1)]),o("div",X,[l.value===_?(n(),f(a(k),{key:0,type:"error",onClick:B,style:{"border-radius":"16px","background-color":"#ED7878","border-color":"transparent"}},{default:p(()=>[b(" 取消选择 ")]),_:1})):(n(),f(a(k),{key:1,type:"success",onClick:Z=>R(t,_),style:{"border-radius":"16px"}},{default:p(()=>[b(" 立即选择 ")]),_:2},1032,["onClick"]))])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1},8,["cols"])])]),_:1},8,["show"]))}});const Qt=N({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible","update-prompt"],setup(x,{emit:u}){const m=x;c("PromptsList");const v=D({get(){return m.visible},set(i){u("update:visible",i)}});function y(i){u("update-prompt",i),console.log("111",i)}return(i,s)=>(n(),f(a(E),{show:v.value,"onUpdate:show":s[0]||(s[0]=h=>v.value=h),title:"角色中心","auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:p(()=>[o("div",null,[g(Y,{onUpdatePrompt:y})])]),_:1},8,["show"]))}});export{Qt as default};
