import{c as se,u as ne,a as H,_ as z,m as oe,w as E,t as J,h as le,x as ie,y as ce,z as re,A as ue}from"./index-5c74c35f.js";import"./crypto-js@4.1.1-7d239ab2.js";import{f as W,h as Y,k as D,i as de,H as pe,K as me,L as _e,y as fe,M as ve,q as ge,r as F,m as he}from"./naive-ui@2.34.3_vue@3.2.47-2f25bd7d.js";import{d as T,b as G,p as P,o as h,c as k,a as e,M as o,L as Q,l as a,I as n,F as K,R as Z,n as ye,H as M,t as xe,V as L,Z as X,J as ee}from"./@vue_runtime-core@3.2.47-ee5b5de5.js";import{r as v,u as s,i as be}from"./@vue_reactivity@3.2.47-860f2346.js";import{L as l,n as te}from"./@vue_shared@3.2.47-c78728cc.js";import"./@vue_runtime-dom@3.2.47-55055d56.js";import"./@iconify_vue@4.1.1_vue@3.2.47-b9acde6e.js";import"./pinia@2.0.36_hmuptsblhheur2tugfgucj7gc4-583fa057.js";import"./vue-demi@0.14.1_vue@3.2.47-71ba0ef2.js";import"./vue-router@4.1.6_vue@3.2.47-0c8af408.js";import"./axios@1.4.0-4a70c6fc.js";import"./@vueuse_core@9.13.0_vue@3.2.47-e79087a4.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-214f754a.js";import"./vue-i18n@9.2.2_vue@3.2.47-1b2f263e.js";import"./@intlify_shared@9.2.2-6f62a0ce.js";import"./@intlify_core-base@9.2.2-e46b7bcb.js";import"./@intlify_message-compiler@9.2.2-e451351e.js";import"./@intlify_devtools-if@9.2.2-c61c979f.js";import"./element-plus@2.3.4_vue@3.2.47-403cb9d4.js";import"./lodash-es@4.17.21-811ce8f5.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-d31af59d.js";import"./@sxzz_popperjs-es@2.11.7-c75af06c.js";import"./@ctrl_tinycolor@3.6.0-f8748455.js";import"./dayjs@1.11.7-7063ff69.js";import"./@babel_runtime@7.21.5-042e6b4d.js";import"./@vue_reactivity@3.3.0-beta.5-c1286f32.js";import"./@vue_shared@3.3.0-beta.5-6fb4f07b.js";import"./async-validator@4.2.5-dee29e8b.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./escape-html@1.0.3-78e42352.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.2.7-56616971.js";import"./@floating-ui_core@1.2.6-614032f8.js";import"./vue3-qrcode@0.0.2_vue@3.2.47-434b0ed2.js";import"./qrcode@1.5.3-a7ae4534.js";import"./encode-utf8@1.0.3-f813de00.js";import"./dijkstrajs@1.0.3-f906a09e.js";import"./vooks@0.2.12_vue@3.2.47-b8ac7ab6.js";import"./evtd@0.2.4-b614532e.js";import"./katex@0.16.7-aa744d12.js";import"./seemly@0.3.6-5600174a.js";import"./vdirs@0.1.8_vue@3.2.47-4519c5fd.js";import"./treemate@0.3.11-25c27bff.js";import"./vueuc@0.4.51_vue@3.2.47-8f25ae16.js";import"./@css-render_vue3-ssr@0.15.12_vue@3.2.47-3117f20a.js";import"./@juggle_resize-observer@3.4.0-41516555.js";import"./css-render@0.15.12-57b1a53f.js";import"./@emotion_hash@0.8.0-8a8e73f6.js";import"./date-fns@2.30.0-975a2d8f.js";import"./@css-render_plugin-bem@0.15.12_css-render@0.15.12-9dde7ffe.js";function we(){const C=new Date,t=C.getDate(),m=C.getMonth()+1;return`${C.getFullYear()}-${m}-${t}`}const ke={class:"p-4 space-y-5 min-h-[200px]"},Ce={class:"space-y-6"},$e={class:"flex items-center"},Ne={class:"text-red-600"},Se={class:"text-green-600"},ze={class:"text-green-600"},Le={key:0,class:"flex items-center"},Ie={class:"text-red-600"},Ue={class:"flex items-center"},De={class:"text-green-600"},Pe={class:"text-green-600"},je={class:"text-green-600"},Re={class:"flex items-center space-x-4 hidden"},Be=e("span",{class:"flex-shrink-0 w-[100px]"},"用户昵称",-1),Me={class:"w-[200px]"},Te={class:"flex-shrink-0 w-[100px]"},Ae={class:"flex flex-wrap items-center gap-4"},Oe={class:"flex items-center space-x-4"},Fe=e("span",{class:"flex-shrink-0 w-[100px]"},"设置主题",-1),Ge={class:"flex flex-wrap items-center gap-4"},Ve={class:"flex items-center space-x-4"},Je=e("span",{class:"flex-shrink-0 w-[100px]"},"设置语言",-1),Qe={class:"flex flex-wrap items-center gap-4"},qe=T({__name:"General",setup(C){const t=se(),m=ne(),{isMobile:_}=H(),x=W(),c=v({}),u=v(!1);async function i(){try{u.value=!0;const{data:r}=await oe();c.value=r}finally{u.value=!1}}const $=v({website:"",register:"",point:""}),N=v(!1);async function S(){try{N.value=!0;const{data:r}=await E();$.value=r}finally{N.value=!1}}G(()=>{i(),S()});const y=P(()=>t.theme),p=P(()=>m.userInfo),j=v(p.value.name??""),V=P({get(){return t.language},set(r){t.setLanguage(r)}}),I=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],A=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function f(r){m.updateUserInfo(r),x.success(J("common.success"))}function w(){const r=we(),b=localStorage.getItem("chatStorage")||"{}",U=JSON.stringify(JSON.parse(b),null,2),g=new Blob([U],{type:"application/json"}),R=URL.createObjectURL(g),B=document.createElement("a");B.href=R,B.download=`chat-store_${r}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B)}function d(r){const b=r.target;if(!b||!b.files)return;const U=b.files[0];if(!U)return;const g=new FileReader;g.onload=()=>{try{const R=JSON.parse(g.result);localStorage.setItem("chatStorage",JSON.stringify(R)),x.success(J("common.success")),location.reload()}catch{x.error(J("common.invalidFileFormat"))}},g.readAsText(U)}function O(){localStorage.removeItem("chatStorage"),location.reload()}function q(){const r=document.getElementById("fileInput");r&&r.click()}const ae=P(()=>`${window.location.origin}#/chat?inviteCode=${c.value.sn}`);return(r,b)=>{var U;return h(),k("div",ke,[e("div",Ce,[e("div",$e,[e("span",null,[o("🌟 尊敬的 "),e("span",Ne,l(s(p).name),1),o(" 用户您好，您共获得 "),e("span",Se,l(c.value.totalPoints),1),o(" 积分，当前剩余 "),e("span",ze,l(c.value.remainingPoints),1),o(" 可用积分（若在过程中出现无结果或异常，将不会扣除您的流量）")])]),((U=c.value.pointsTip)==null?void 0:U.length)>0?(h(),k("div",Le,[e("span",null,[o("💡 温馨提示： "),e("span",Ie,l(c.value.pointsTip),1)])])):Q("",!0),e("div",Ue,[e("span",null,[o("🧑‍🤝‍🧑 邀请您的朋友注册您可以获得 "),e("span",De,l($.value.point.inviter),1),o(" 积分，您的朋友可以获得 "),e("span",Pe,l($.value.point.invitee),1),o(" 积分。您的邀请链接为（可长按选中复制）："),e("span",je,l(s(ae)),1),o(" （⚠ 若系统检测到您自己邀请自己，则不会发送奖励 ）")])]),e("div",Re,[Be,e("div",Me,[a(s(Y),{value:j.value,"onUpdate:value":b[0]||(b[0]=g=>j.value=g),placeholder:""},null,8,["value"])]),a(s(D),{size:"tiny",text:"",type:"primary",onClick:b[1]||(b[1]=g=>f({name:j.value}))},{default:n(()=>[o(l(r.$t("common.save")),1)]),_:1})]),e("div",{class:te(["flex items-center space-x-4",s(_)&&"items-start"])},[e("span",Te,l(r.$t("setting.chatHistory")),1),e("div",Ae,[a(s(D),{size:"small",onClick:w},{icon:n(()=>[a(s(z),{icon:"ri:download-2-fill"})]),default:n(()=>[o(" "+l(r.$t("common.export")),1)]),_:1}),e("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:d},null,32),a(s(D),{size:"small",onClick:q},{icon:n(()=>[a(s(z),{icon:"ri:upload-2-fill"})]),default:n(()=>[o(" "+l(r.$t("common.import")),1)]),_:1}),a(s(de),{placement:"bottom",onPositiveClick:O},{trigger:n(()=>[a(s(D),{size:"small"},{icon:n(()=>[a(s(z),{icon:"ri:close-circle-line"})]),default:n(()=>[o(" "+l(r.$t("common.clear")),1)]),_:1})]),default:n(()=>[o(" "+l(r.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),e("div",Oe,[Fe,e("div",Ge,[(h(),k(K,null,Z(I,g=>a(s(D),{key:g.key,size:"small",type:g.key===s(y)?"primary":void 0,onClick:R=>s(t).setTheme(g.key)},{icon:n(()=>[a(s(z),{icon:g.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),e("div",Ve,[Je,e("div",Qe,[a(s(pe),{style:{width:"140px"},value:s(V),options:A,onUpdateValue:b[2]||(b[2]=g=>s(t).setLanguage(g))},null,8,["value"])])])])])}}}),He={class:"p-4 space-y-4"},Ee={class:"flex items-center space-x-4"},We={class:"flex-1"},Ye={class:"items-center clear"},Ke={class:"text-red-600"},Ze={key:0},Xe=e("span",null,[o("有效期："),e("span",{class:"text-red-600"},"永久有效")],-1),et=[Xe],tt={key:1},at={class:"text-red-600"},st={class:"text-red-600"},nt={key:2},ot={key:0,class:"flex justify-center"},lt=T({__name:"About",setup(C){const{isMobile:t}=H(),m=W(),_=v("");le("MjQ1NjI5NTYw");const c=P(()=>i.value||!_.value||_.value.trim()===""),u=v({website:"",register:""}),i=v(!1);async function $(){try{i.value=!0;const{data:f}=await E();u.value=f}finally{i.value=!1}}function N(){if(y.value&&y.value.length>0&&I.value<y.value.length){const f=y.value[I.value];f&&f.jumpUrl.length>0?window.open(f.jumpUrl):console.error("Card or jumpUrl is undefined")}else console.error("Invalid selectedCardIndex or cards is not populated")}const S=v(null),y=v();async function p(){try{i.value=!0;const{data:f}=await ie();y.value=f,await xe(),A()}finally{i.value=!1}}const j=async()=>{await ce(_.value).then(f=>{var w;f.status==="success"?(m.success(f.message),location.reload()):((w=S.value)==null||w.focus(),m.error(f.message))})};G(()=>{p(),$()});function V(f){I.value=f}const I=v(0);function A(){y.value.forEach((f,w)=>{const d=document.querySelector(`.card-${w}`);I.value===w?d==null||d.classList.add("selected"):d==null||d.classList.remove("selected")})}return ye(I,()=>{A()}),(f,w)=>(h(),M(s(ve),{show:i.value},{default:n(()=>[e("div",He,[e("div",Ee,[e("div",We,[a(s(Y),{ref_key:"cardNoRef",ref:S,value:_.value,"onUpdate:value":w[0]||(w[0]=d=>_.value=d),placeholder:"卡密"},null,8,["value"])]),a(s(D),{type:"success",disabled:s(c),onClick:j},{default:n(()=>[o(" 卡密激活 ")]),_:1},8,["disabled"])]),e("div",Ye,[e("span",null,l(u.value.website.qq),1)]),a(s(me),{"x-gap":"12",cols:s(t)?1:2},{default:n(()=>[(h(!0),k(K,null,Z(y.value,(d,O)=>(h(),M(s(_e),null,{default:n(()=>[a(s(fe),{style:{"margin-bottom":"10px"},headStyle:{textAlign:"center"},class:te(`card-${O}`),title:d.name,hoverable:"",size:"medium",onClick:q=>V(O)},{default:n(()=>[e("div",null,[e("span",null,[o("可使用："),e("span",Ke,l(d.totalPoints),1),o(" 积分")])]),d.duration==="0"?(h(),k("div",Ze,et)):(h(),k("div",tt,[e("span",null,[o("有效期："),e("span",at,l(d.duration),1),o(" 天")])])),e("div",null,[e("span",null,[o("价格："),e("span",st,l(d.price)+" 元",1),o(),e("del",null,l(d.marketPrice)+" 元",1)])]),d.desc.length>0?(h(),k("div",nt,l(d.desc),1)):Q("",!0)]),_:2},1032,["class","title","onClick"])]),_:2},1024))),256))]),_:1},8,["cols"]),u.value.website.enablePurchaseLink?(h(),k("div",ot,[a(s(D),{type:"success",onClick:N,style:{"border-radius":"16px"}},{default:n(()=>[o(" 立即购买 ")]),_:1})])):Q("",!0)])]),_:1},8,["show"]))}}),it={class:"flex justify-end mt-4"},ct=T({__name:"PointsList",setup(C){const t=v({loading:!1,lists:[],total:0,pageNo:1,pageSize:10}),m=v([]);G(async()=>{await _(t.value.pageNo,t.value.pageSize)});async function _(c,u){t.value.loading=!0;const i=await re({pageNo:c,pageSize:u});m.value=i.data,t.value.lists=m.value.list,t.value.total=m.value.count,t.value.pageNo=c,t.value.pageSize=u,t.value.loading=!1}function x(c){t.value.pageNo=c,_(t.value.pageNo,t.value.pageSize)}return(c,u)=>{const i=L("el-table-column"),$=L("el-table"),N=L("el-pagination"),S=L("el-card"),y=X("loading");return h(),k("div",null,[a(S,{shadow:"never"},{default:n(()=>[ee((h(),M($,{size:"large",data:t.value.lists,height:"400",style:{width:"100%"}},{default:n(()=>[a(i,{label:"获取途径",prop:"card","min-width":"100"},{default:n(({row:p})=>[o(l(p.from),1)]),_:1}),a(i,{label:"积分数量",prop:"price","min-width":"120"},{default:n(({row:p})=>[o(l(p.points),1)]),_:1}),a(i,{label:"获取时间",prop:"time","min-width":"180"},{default:n(({row:p})=>[o(l(p.createdAt),1)]),_:1}),a(i,{label:"过期时间",prop:"price","min-width":"120"},{default:n(({row:p})=>[o(l(p.expiredAt),1)]),_:1})]),_:1},8,["data"])),[[y,t.value.loading]]),e("div",it,[a(N,{background:"",onCurrentChange:x,"current-page":t.value.pageNo,"page-size":t.value.pageSize,layout:"prev, pager, next",total:t.value.total},null,8,["current-page","page-size","total"])])]),_:1})])}}}),rt={class:"flex justify-end mt-4"},ut=T({__name:"ReferralList",setup(C){const t=v({loading:!1,lists:[],total:0,pageNo:1,pageSize:10}),m=v([]);G(async()=>{await _(t.value.pageNo,t.value.pageSize)});async function _(c,u){t.value.loading=!0;const i=await ue({pageNo:c,pageSize:u});m.value=i.data,t.value.lists=m.value.list,t.value.total=m.value.count,t.value.pageNo=c,t.value.pageSize=u,t.value.loading=!1}function x(c){t.value.pageNo=c,_(t.value.pageNo,t.value.pageSize)}return(c,u)=>{const i=L("el-table-column"),$=L("el-table"),N=L("el-pagination"),S=L("el-card"),y=X("loading");return h(),k("div",null,[a(S,{shadow:"never"},{default:n(()=>[ee((h(),M($,{size:"large",data:t.value.lists,height:"400",style:{width:"100%"}},{default:n(()=>[a(i,{label:"被邀请人",prop:"inviteeName","min-width":"150"},{default:n(({row:p})=>[o(l(p.inviteeName),1)]),_:1}),a(i,{label:"获取积分",prop:"score","min-width":"120"},{default:n(({row:p})=>[o(l(p.points),1)]),_:1}),a(i,{label:"邀请时间",prop:"time","min-width":"180"},{default:n(({row:p})=>[o(l(p.createdAt),1)]),_:1})]),_:1},8,["data"])),[[y,t.value.loading]]),e("div",rt,[a(N,{background:"",onCurrentChange:x,"current-page":t.value.pageNo,"page-size":t.value.pageSize,layout:"prev, pager, next",total:t.value.total},null,8,["current-page","page-size","total"])])]),_:1})])}}}),dt={class:"ml-2"},pt={class:"min-h-[100px]"},mt=e("span",{class:"ml-2"},"套餐",-1),_t=e("span",{class:"ml-2"},"积分",-1),ft=e("span",{class:"ml-2"},"邀请",-1),ma=T({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(C,{emit:t}){const m=C,_=v("General"),x=P({get(){return m.visible},set(c){t("update:visible",c)}});return(c,u)=>(h(),M(s(he),{show:s(x),"onUpdate:show":u[1]||(u[1]=i=>be(x)?x.value=i:null),title:"个人中心","auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:n(()=>[e("div",null,[a(s(ge),{value:_.value,"onUpdate:value":u[0]||(u[0]=i=>_.value=i),type:"line",animated:""},{default:n(()=>[a(s(F),{name:"General",tab:"General"},{tab:n(()=>[a(s(z),{class:"text-lg",icon:"ri:file-user-line"}),e("span",dt,l(c.$t("setting.general")),1)]),default:n(()=>[e("div",pt,[a(qe)])]),_:1}),a(s(F),{name:"Config",tab:"Config"},{tab:n(()=>[a(s(z),{class:"text-lg",icon:"ri:list-settings-line"}),mt]),default:n(()=>[a(lt)]),_:1}),a(s(F),{name:"PointsList",tab:"PointsList"},{tab:n(()=>[a(s(z),{class:"text-lg",icon:"ri:file-user-line"}),_t]),default:n(()=>[a(ct)]),_:1}),a(s(F),{name:"ReferralList",tab:"ReferralList"},{tab:n(()=>[a(s(z),{class:"text-lg",icon:"ri:file-user-line"}),ft]),default:n(()=>[a(ut)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{ma as default};
