import{i as P,a as S,w as j,B as M}from"./index-5c74c35f.js";import{d as R,b as $,n as I,o as n,H as _,I as p,a as o,l as g,c as V,F as z,R as D,M as b,t as F,p as G}from"./@vue_runtime-core@3.2.47-ee5b5de5.js";import{r as c,u as s,i as T}from"./@vue_reactivity@3.2.47-860f2346.js";import{K as U,L as q,y as A,k,M as H,m as K}from"./naive-ui@2.34.3_vue@3.2.47-2f25bd7d.js";import{n as E,L as C}from"./@vue_shared@3.2.47-c78728cc.js";import"./@vue_runtime-dom@3.2.47-55055d56.js";import"./@iconify_vue@4.1.1_vue@3.2.47-b9acde6e.js";import"./pinia@2.0.36_hmuptsblhheur2tugfgucj7gc4-583fa057.js";import"./vue-demi@0.14.1_vue@3.2.47-71ba0ef2.js";import"./crypto-js@4.1.1-7d239ab2.js";import"./@babel_runtime@7.21.5-042e6b4d.js";import"./vue-router@4.1.6_vue@3.2.47-0c8af408.js";import"./axios@1.4.0-4a70c6fc.js";import"./@vueuse_core@9.13.0_vue@3.2.47-e79087a4.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-214f754a.js";import"./vue-i18n@9.2.2_vue@3.2.47-1b2f263e.js";import"./@intlify_shared@9.2.2-6f62a0ce.js";import"./@intlify_core-base@9.2.2-e46b7bcb.js";import"./@intlify_message-compiler@9.2.2-e451351e.js";import"./@intlify_devtools-if@9.2.2-c61c979f.js";import"./element-plus@2.3.4_vue@3.2.47-403cb9d4.js";import"./lodash-es@4.17.21-811ce8f5.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-d31af59d.js";import"./@sxzz_popperjs-es@2.11.7-c75af06c.js";import"./@ctrl_tinycolor@3.6.0-f8748455.js";import"./dayjs@1.11.7-7063ff69.js";import"./@vue_reactivity@3.3.0-beta.5-c1286f32.js";import"./@vue_shared@3.3.0-beta.5-6fb4f07b.js";import"./async-validator@4.2.5-dee29e8b.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./escape-html@1.0.3-78e42352.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.2.7-56616971.js";import"./@floating-ui_core@1.2.6-614032f8.js";import"./vue3-qrcode@0.0.2_vue@3.2.47-434b0ed2.js";import"./qrcode@1.5.3-a7ae4534.js";import"./encode-utf8@1.0.3-f813de00.js";import"./dijkstrajs@1.0.3-f906a09e.js";import"./vooks@0.2.12_vue@3.2.47-b8ac7ab6.js";import"./evtd@0.2.4-b614532e.js";import"./katex@0.16.7-aa744d12.js";import"./seemly@0.3.6-5600174a.js";import"./vdirs@0.1.8_vue@3.2.47-4519c5fd.js";import"./treemate@0.3.11-25c27bff.js";import"./vueuc@0.4.51_vue@3.2.47-8f25ae16.js";import"./@css-render_vue3-ssr@0.15.12_vue@3.2.47-3117f20a.js";import"./@juggle_resize-observer@3.4.0-41516555.js";import"./css-render@0.15.12-57b1a53f.js";import"./@emotion_hash@0.8.0-8a8e73f6.js";import"./date-fns@2.30.0-975a2d8f.js";import"./@css-render_plugin-bem@0.15.12_css-render@0.15.12-9dde7ffe.js";const J={class:"p-4 space-y-4"},O={class:"flex justify-center"},Q=["src"],W={class:"flex justify-center"},X={class:"flex justify-center"},Y={class:"flex justify-center",style:{"margin-top":"10px"}},Z=R({__name:"PromptsList",emits:["update-prompt"],setup(x,{emit:u}){const m=P(),d=c(m.currentRole),{isMobile:y}=S(),i=c({website:"",register:""}),r=c(!1);async function h(){try{r.value=!0;const{data:a}=await j();i.value=a}finally{r.value=!1}}const f=c();async function L(){try{r.value=!0;const{data:a}=await M();f.value=a;for(let e=0;e<f.value.length;e++)if(f.value[e].id===d.value.id){l.value=e;break}await F(),w()}finally{r.value=!1}}$(()=>{L(),h()});const l=c(-1);function w(){f.value.forEach((a,e)=>{const t=document.querySelector(`.prompt-${e}`);l.value===e?t==null||t.classList.add("selected"):t==null||t.classList.remove("selected")})}I(l,()=>{w(),console.log("selectedCardIndex",l.value)});function N(a,e){u("update-prompt",a.key),m.updateRole(a),l.value=e}function B(){l.value=-1,u("update-prompt",""),console.log("cancelRole"),m.resetRole()}return(a,e)=>(n(),_(s(H),{show:r.value},{default:p(()=>[o("div",J,[g(s(U),{"x-gap":"12",cols:s(y)?2:3,style:{"max-height":"640px","overflow-y":"auto"}},{default:p(()=>[(n(!0),V(z,null,D(f.value,(t,v)=>(n(),_(s(q),{key:v},{default:p(()=>[g(s(A),{style:{"margin-bottom":"10px"},headStyle:{textAlign:"center"},class:E(`prompt-${v}`),hoverable:"",size:"medium"},{default:p(()=>[o("div",O,[o("img",{src:t.icon,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"50%"}},null,8,Q)]),o("div",W,[o("span",null,C(t.key),1)]),o("div",X,[o("span",null,C(t.desc),1)]),o("div",Y,[l.value===v?(n(),_(s(k),{key:0,type:"error",onClick:B,style:{"border-radius":"16px","background-color":"#ED7878","border-color":"transparent"}},{default:p(()=>[b(" 取消佩戴 ")]),_:1})):(n(),_(s(k),{key:1,type:"success",onClick:tt=>N(t,v),style:{"border-radius":"16px"}},{default:p(()=>[b(" 立即佩戴 ")]),_:2},1032,["onClick"]))])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1},8,["cols"])])]),_:1},8,["show"]))}});const Yt=R({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible","update-prompt"],setup(x,{emit:u}){const m=x;c("PromptsList");const d=G({get(){return m.visible},set(i){u("update:visible",i)}});function y(i){u("update-prompt",i),console.log("111",i)}return(i,r)=>(n(),_(s(K),{show:s(d),"onUpdate:show":r[0]||(r[0]=h=>T(d)?d.value=h:null),title:"角色中心","auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:p(()=>[o("div",null,[g(Z,{onUpdatePrompt:y})])]),_:1},8,["show"]))}});export{Yt as default};
