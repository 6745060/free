import{g as x}from"./@babel_runtime@7.22.3-042e6b4d.js";import{k as s}from"./katex@0.16.7-030cde00.js";var t=s;function h(r,n){var e,c,i=r.posMax,o=!0,l=!0;return e=n>0?r.src.charCodeAt(n-1):-1,c=n+1<=i?r.src.charCodeAt(n+1):-1,(e===32||e===9||c>=48&&c<=57)&&(l=!1),(c===32||c===9)&&(o=!1),{can_open:o,can_close:l}}function $(r,n){var e,c,i,o,l;if(r.src[r.pos]!=="$")return!1;if(o=h(r,r.pos),!o.can_open)return n||(r.pending+="$"),r.pos+=1,!0;for(e=r.pos+1,c=e;(c=r.src.indexOf("$",c))!==-1;){for(l=c-1;r.src[l]==="\\";)l-=1;if((c-l)%2==1)break;c+=1}return c===-1?(n||(r.pending+="$"),r.pos=e,!0):c-e===0?(n||(r.pending+="$$"),r.pos=e+1,!0):(o=h(r,c),o.can_close?(n||(i=r.push("math_inline","math",0),i.markup="$",i.content=r.src.slice(e,c)),r.pos=c+1,!0):(n||(r.pending+="$"),r.pos=e,!0))}function b(r,n,e,c){var i,o,l,f,a=!1,p,u=r.bMarks[n]+r.tShift[n],k=r.eMarks[n];if(u+2>k||r.src.slice(u,u+2)!=="$$")return!1;if(u+=2,i=r.src.slice(u,k),c)return!0;for(i.trim().slice(-2)==="$$"&&(i=i.trim().slice(0,-2),a=!0),l=n;!a&&(l++,!(l>=e||(u=r.bMarks[l]+r.tShift[l],k=r.eMarks[l],u<k&&r.tShift[l]<r.blkIndent)));)r.src.slice(u,k).trim().slice(-2)==="$$"&&(f=r.src.slice(0,k).lastIndexOf("$$"),o=r.src.slice(u,f),a=!0);return r.line=l+1,p=r.push("math_block","math",0),p.block=!0,p.content=(i&&i.trim()?i+`
`:"")+r.getLines(n+1,l,r.tShift[n],!0)+(o&&o.trim()?o:""),p.map=[n,r.line],p.markup="$$",!0}function m(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var g=function(n,e){e=e||{},e.katex&&(t=e.katex),e.blockClass||(e.blockClass="");var c=function(f){e.displayMode=!1;try{return t.renderToString(f,e)}catch(a){return e.throwOnError&&console.log(a),`<span class='katex-error' title='${m(a.toString())}'>${m(f)}</span>`}},i=function(f,a){return c(f[a].content)},o=function(f){e.displayMode=!0;try{return`<p class="katex-block ${e.blockClass}">`+t.renderToString(f,e)+"</p>"}catch(a){return e.throwOnError&&console.log(a),`<p class='katex-block katex-error ${e.blockClass}' title='${m(a.toString())}'>${m(f)}</p>`}},l=function(f,a){return o(f[a].content)+`
`};n.inline.ruler.after("escape","math_inline",$),n.block.ruler.after("blockquote","math_block",b,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.math_inline=i,n.renderer.rules.math_block=l};const v=x(g);export{v as m};
