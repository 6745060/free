import{m as B,a as S,f as j,F as M}from"./index-945a5f1e.js";import{d as N,b as $,p as F,o as n,I as f,J as p,a as o,m as g,c as I,F as U,U as V,N as b,v as q,q as z}from"./@vue_runtime-core@3.3.4-92a10329.js";import{r as c,u as a}from"./@vue_reactivity@3.3.4-7af2db68.js";import{M as D,O as G,y as T,k,P as A,m as J}from"./naive-ui@2.34.4_vue@3.3.4-671c5e50.js";import{n as O,L as C}from"./@vue_shared@3.3.4-980ed777.js";import"./@vue_runtime-dom@3.3.4-a4664548.js";import"./@iconify_vue@4.1.1_vue@3.3.4-cf8d46fc.js";import"./pinia@2.1.3_typescript@4.9.5_vue@3.3.4-a4493677.js";import"./vue-demi@0.14.5_vue@3.3.4-71ba0ef2.js";import"./crypto-js@4.1.1-b83763f6.js";import"./@babel_runtime@7.22.3-042e6b4d.js";import"./vue-router@4.2.1_vue@3.3.4-4d20e068.js";import"./axios@1.4.0-4a70c6fc.js";import"./@vueuse_core@9.13.0_vue@3.3.4-03e59834.js";import"./@vueuse_shared@9.13.0_vue@3.3.4-acd595f8.js";import"./vue-i18n@9.2.2_vue@3.3.4-28e091b0.js";import"./@intlify_shared@9.2.2-6f62a0ce.js";import"./@intlify_core-base@9.2.2-e46b7bcb.js";import"./@intlify_message-compiler@9.2.2-e451351e.js";import"./@intlify_devtools-if@9.2.2-c61c979f.js";import"./element-plus@2.3.5_vue@3.3.4-2b65cc55.js";import"./lodash-es@4.17.21-811ce8f5.js";import"./@element-plus_icons-vue@2.1.0_vue@3.3.4-b3a07064.js";import"./@sxzz_popperjs-es@2.11.7-c75af06c.js";import"./@ctrl_tinycolor@3.6.0-f8748455.js";import"./dayjs@1.11.7-7e58136b.js";import"./async-validator@4.2.5-dee29e8b.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./escape-html@1.0.3-3eacd9ba.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.2.9-4d9f66a7.js";import"./@floating-ui_core@1.2.6-614032f8.js";import"./vue3-qrcode@0.0.2_vue@3.3.4-ff3ae8a7.js";import"./qrcode@1.5.3-b7eb702b.js";import"./encode-utf8@1.0.3-f813de00.js";import"./dijkstrajs@1.0.3-f906a09e.js";import"./vooks@0.2.12_vue@3.3.4-d1f7853f.js";import"./evtd@0.2.4-b614532e.js";import"./katex@0.16.7-030cde00.js";import"./seemly@0.3.6-5600174a.js";import"./treemate@0.3.11-25c27bff.js";import"./vdirs@0.1.8_vue@3.3.4-4519c5fd.js";import"./vueuc@0.4.51_vue@3.3.4-ca4236d7.js";import"./@css-render_vue3-ssr@0.15.12_vue@3.3.4-dfbe021a.js";import"./@juggle_resize-observer@3.4.0-41516555.js";import"./css-render@0.15.12-57b1a53f.js";import"./@emotion_hash@0.8.0-8a8e73f6.js";import"./date-fns@2.30.0-975a2d8f.js";import"./@css-render_plugin-bem@0.15.12_css-render@0.15.12-9dde7ffe.js";const E={class:"p-4 space-y-4"},H={class:"flex justify-center"},K=["src"],Q={class:"flex justify-center"},W={class:"flex justify-center"},X={class:"flex justify-center",style:{"margin-top":"10px"}},Y=N({__name:"PromptsList",emits:["update-prompt"],setup(x,{emit:u}){const m=B(),v=c(m.currentRole),{isMobile:y}=S(),i=c({website:"",register:""}),s=c(!1);async function h(){try{s.value=!0;const{data:r}=await j();i.value=r}finally{s.value=!1}}const d=c();async function L(){try{s.value=!0;const{data:r}=await M();d.value=r;for(let e=0;e<d.value.length;e++)if(d.value[e].id===v.value.id){l.value=e;break}await q(),w()}finally{s.value=!1}}$(()=>{L(),h()});const l=c(-1);function w(){d.value.forEach((r,e)=>{const t=document.querySelector(`.prompt-${e}`);l.value===e?t==null||t.classList.add("selected"):t==null||t.classList.remove("selected")})}F(l,()=>{w(),console.log("selectedCardIndex",l.value)});function P(r,e){u("update-prompt",r.key),m.updateRole(r),l.value=e}function R(){l.value=-1,u("update-prompt",""),console.log("cancelRole"),m.resetRole()}return(r,e)=>(n(),f(a(A),{show:s.value},{default:p(()=>[o("div",E,[g(a(D),{"x-gap":"12",cols:a(y)?2:3,style:{"max-height":"640px","overflow-y":"auto"}},{default:p(()=>[(n(!0),I(U,null,V(d.value,(t,_)=>(n(),f(a(G),{key:_},{default:p(()=>[g(a(T),{style:{"margin-bottom":"10px"},headStyle:{textAlign:"center"},class:O(`prompt-${_}`),hoverable:"",size:"medium"},{default:p(()=>[o("div",H,[o("img",{src:t.icon,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"50%"}},null,8,K)]),o("div",Q,[o("span",null,C(t.key),1)]),o("div",W,[o("span",null,C(t.desc),1)]),o("div",X,[l.value===_?(n(),f(a(k),{key:0,type:"error",onClick:R,style:{"border-radius":"16px","background-color":"#ED7878","border-color":"transparent"}},{default:p(()=>[b(" 取消选择 ")]),_:1})):(n(),f(a(k),{key:1,type:"success",onClick:Z=>P(t,_),style:{"border-radius":"16px"}},{default:p(()=>[b(" 立即选择 ")]),_:2},1032,["onClick"]))])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1},8,["cols"])])]),_:1},8,["show"]))}});const Qt=N({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible","update-prompt"],setup(x,{emit:u}){const m=x;c("PromptsList");const v=z({get(){return m.visible},set(i){u("update:visible",i)}});function y(i){u("update-prompt",i),console.log("111",i)}return(i,s)=>(n(),f(a(J),{show:v.value,"onUpdate:show":s[0]||(s[0]=h=>v.value=h),title:"角色中心","auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:p(()=>[o("div",null,[g(Y,{onUpdatePrompt:y})])]),_:1},8,["show"]))}});export{Qt as default};
