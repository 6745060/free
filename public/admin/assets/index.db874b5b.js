import{e as I,aW as T,b2 as K,b3 as P,b4 as L,b5 as U,n as $,b6 as j,o as h,g as N,h as e,w as a,u as t,a$ as g,Z as c,C as R,k as S,j as E,V as q,a0 as M,aX as Z,aY as z,ab as H,aZ as W,b1 as X}from"./.pnpm.aa9acb74.js";import{u as Y,_ as G}from"./usePaging.360c2585.js";import{r as w,f as J}from"./index.83cc6034.js";function O(i){return w.get({url:"/chat/list",params:i})}function Q(i){return w.get({url:"/chat/delete",params:i})}const ee=E("br",null,null,-1),te={href:"javascript:void(0);"},ae={class:"flex justify-end mt-4"},ue=I({__name:"index",setup(i){const n=T({userId:"",prompt:"",startTime:"",endTime:""}),C=d=>{M.alert(d,"AI \u56DE\u590D",{center:!0,draggable:!0,dangerouslyUseHTMLString:!0})},{pager:s,getLists:r,resetPage:p,resetParams:D}=Y({fetchFun:O,params:n}),k=async d=>{await J.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await Q({id:d}),r()};return K(()=>{r()}),r(),(d,u)=>{const f=Z,m=z,_=H,v=W,b=X,l=P,F=L,y=U,B=G,V=$("edit-popup"),x=j;return h(),N("div",null,[e(b,{class:"!border-none",shadow:"never"},{default:a(()=>[e(v,{ref:"formRef",class:"mb-[-16px]",model:t(n),inline:!0},{default:a(()=>[e(m,{label:"\u63D0\u95EE\u4EBAID"},{default:a(()=>[e(f,{class:"w-[280px]",modelValue:t(n).userId,"onUpdate:modelValue":u[0]||(u[0]=o=>t(n).userId=o),placeholder:"",clearable:"",onKeyup:g(t(p),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"\u63D0\u95EE\u95EE\u9898"},{default:a(()=>[e(f,{class:"w-[280px]",modelValue:t(n).prompt,"onUpdate:modelValue":u[1]||(u[1]=o=>t(n).prompt=o),placeholder:"\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeyup:g(t(p),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),ee,e(m,null,{default:a(()=>[e(_,{type:"primary",onClick:t(p)},{default:a(()=>[c("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(_,{onClick:t(D)},{default:a(()=>[c("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[R((h(),S(y,{size:"large",data:t(s).lists,height:"600",style:{width:"100%"}},{default:a(()=>[e(l,{label:"\u63D0\u95EE\u4EBAID",prop:"user.id",sortable:"","min-width":"120"}),e(l,{label:"\u63D0\u95EE\u4EBA\u6635\u79F0",prop:"user.name",sortable:"","min-width":"150"}),e(l,{label:"\u63D0\u95EE\u95EE\u9898",prop:"prompt",sortable:"","min-width":"200"}),e(l,{label:"AI\u56DE\u590D","min-width":"100"},{default:a(({row:o})=>[E("a",te,[e(F,{type:"success",onClick:A=>C(o.content)},{default:a(()=>[c("\u67E5\u770B\u56DE\u590D")]),_:2},1032,["onClick"])])]),_:1}),e(l,{label:"\u4F7F\u7528\u6A21\u578B",prop:"model",sortable:"","min-width":"150"}),e(l,{label:"\u6D88\u8017tokens",prop:"totalTokens",sortable:"","min-width":"130"}),e(l,{label:"\u6D88\u8017\u79EF\u5206",prop:"totalPoints",sortable:"","min-width":"130"}),e(l,{label:"\u63D0\u95EE\u65F6\u95F4",prop:"createdAt",sortable:"","min-width":"180"}),e(l,{label:"\u64CD\u4F5C",width:"70",fixed:"right"},{default:a(({row:o})=>[e(_,{type:"danger",link:"",onClick:A=>k(o.id)},{default:a(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,t(s).loading]]),E("div",ae,[e(B,{modelValue:t(s),"onUpdate:modelValue":u[2]||(u[2]=o=>q(s)?s.value=o:null),onChange:t(r)},null,8,["modelValue","onChange"])])]),_:1}),e(V,{ref:"editRef",onSuccess:t(r)},null,8,["onSuccess"])])}}});export{ue as default};
