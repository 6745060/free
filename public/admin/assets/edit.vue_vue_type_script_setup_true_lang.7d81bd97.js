import{e as x,q as U,f as P,s as B,aW as N,be as j,bf as S,b9 as T,ba as O,o as p,g as c,h as l,w as t,u as a,N as I,O as Z,Z as F,y as D,m as E,j as g,aY as G,aX as L,aZ as W}from"./.pnpm.de1384b3.js";import{a as X,s as Y}from"./model.676a7d21.js";import{P as z}from"./index.284c7132.js";import{f as H}from"./index.9c35de43.js";const J={class:"edit-popup"},K=g("div",{class:"form-tips"},"\u6A21\u578B\u540D\u79F0\u4E00\u65E6\u586B\u5199\u65E0\u6CD5\u4FEE\u6539\uFF0C\u8BF7\u8BA4\u771F\u586B\u5199",-1),Q={key:0,class:"form-tips"},$={key:1,class:"form-tips"},ee=g("div",{class:"form-tips"},"\u7528\u6237\u79EF\u5206\u5C0F\u4E8E\u6700\u4F4E\u79EF\u5206\u5C06\u65E0\u6CD5\u4F7F\u7528\u8BE5\u6A21\u578B\uFF0C\u4F1A\u63D0\u793A\u79EF\u5206\u4E0D\u8DB3",-1),ue=g("div",{class:"form-tips"},"\u6570\u503C\u8D8A\u5927\u8D8A\u9760\u524D",-1),re=x({__name:"edit",emits:["success"],setup(ae,{expose:A,emit:v}){const n=U("add"),V=P(()=>n.value=="edit"?"\u7F16\u8F91\u6A21\u578B":"\u6DFB\u52A0\u6A21\u578B"),f=B(),b=B(),u=N({id:0,driver:"openai",name:"",alias:"",maxTokens:"4096",minPoints:"0",chargeMode:"tokens",chargeRate:"10",sort:"100",isDisable:0}),k=[{value:"openai",label:"openai"},{value:"midjourney",label:"midjourney"}],C={driver:[{required:!0,message:"\u8BF7\u9009\u62E9\u9A71\u52A8",trigger:"blur"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u79F0",trigger:"blur"}],alias:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u578B\u522B\u540D",trigger:"blur"}],minPoints:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u4F4E\u79EF\u5206",trigger:"blur"}],maxTokens:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u5927tokens",trigger:"blur"}],chargeMode:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BA1\u8D39\u6A21\u5F0F",trigger:"blur"}],chargeRate:[{required:!0,message:"\u8F93\u5165\u8BA1\u8D39\u500D\u6570",trigger:"blur"}],sort:[{required:!0,message:"\u8F93\u5165\u6392\u5E8F\u6570\u5B57",trigger:"blur"}],isDisable:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001",trigger:"blur"}]},h=async s=>{const e=await X({id:s.id});for(const d in u)e[d]!=null&&e[d]!=null&&(u[d]=e[d])},R=async()=>{var s,e;await((s=f.value)==null?void 0:s.validate()),await Y(u),(e=b.value)==null||e.close(),v("success"),H.msgSuccess("\u64CD\u4F5C\u6210\u529F")},y=(s="add")=>{var e;n.value=s,(e=b.value)==null||e.open()},q=()=>{var s;(s=f.value)==null||s.resetFields()};return A({open:y,setFormData:h}),(s,e)=>{const d=j,w=S,r=G,i=L,m=T,_=O,M=W;return p(),c("div",J,[l(z,{ref_key:"popupRef",ref:b,title:a(V),async:!0,width:"550px",onClose:q,onConfirm:R},{default:t(()=>[l(M,{ref_key:"formRef",ref:f,model:a(u),rules:C,"label-width":"100px"},{default:t(()=>[l(r,{label:"\u6A21\u578B\u9A71\u52A8",prop:"driver"},{default:t(()=>[l(w,{disabled:a(n)=="edit",modelValue:a(u).driver,"onUpdate:modelValue":e[0]||(e[0]=o=>a(u).driver=o),class:"w-[100%]"},{default:t(()=>[(p(),c(I,null,Z(k,o=>l(d,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["disabled","modelValue"])]),_:1}),l(r,{label:"\u6A21\u578B\u540D\u79F0",prop:"name"},{default:t(()=>[l(i,{disabled:a(n)=="edit",modelValue:a(u).name,"onUpdate:modelValue":e[1]||(e[1]=o=>a(u).name=o),clearable:""},null,8,["disabled","modelValue"]),K]),_:1}),l(r,{label:"\u6A21\u578B\u522B\u540D",prop:"alias"},{default:t(()=>[l(i,{modelValue:a(u).alias,"onUpdate:modelValue":e[2]||(e[2]=o=>a(u).alias=o),clearable:"",placeholder:"\u5BF9\u5916\u663E\u793A\u540D"},null,8,["modelValue"])]),_:1}),l(r,{label:"\u8BA1\u8D39\u6A21\u5F0F",prop:"chargeMode"},{default:t(()=>[l(_,{modelValue:a(u).chargeMode,"onUpdate:modelValue":e[3]||(e[3]=o=>a(u).chargeMode=o)},{default:t(()=>[l(m,{label:"times"},{default:t(()=>[F("\u6B21\u6570")]),_:1}),l(m,{disabled:a(u).driver=="midjourney",label:"tokens"},{default:t(()=>[F("tokens")]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"\u8BA1\u8D39\u500D\u6570",prop:"chargeRate"},{default:t(()=>[l(i,{modelValue:a(u).chargeRate,"onUpdate:modelValue":e[4]||(e[4]=o=>a(u).chargeRate=o),clearable:"",placeholder:""},null,8,["modelValue"]),a(u).chargeMode=="times"?(p(),c("div",Q,"\u6D88\u8017\u79EF\u5206 = \u6B21\u6570 * "+D(a(u).chargeRate),1)):E("",!0),a(u).chargeMode=="tokens"?(p(),c("div",$,"\u6D88\u8017\u79EF\u5206 = tokens * "+D(a(u).chargeRate),1)):E("",!0)]),_:1}),l(r,{label:"\u6700\u4F4E\u79EF\u5206",prop:"minPoints"},{default:t(()=>[l(i,{modelValue:a(u).minPoints,"onUpdate:modelValue":e[5]||(e[5]=o=>a(u).minPoints=o),clearable:"",placeholder:""},null,8,["modelValue"]),ee]),_:1}),l(r,{label:"\u5C55\u793A\u987A\u5E8F",prop:"sort"},{default:t(()=>[l(i,{modelValue:a(u).sort,"onUpdate:modelValue":e[6]||(e[6]=o=>a(u).sort=o),clearable:"",placeholder:"\u6570\u503C\u8D8A\u5927\u8D8A\u9760\u524D"},null,8,["modelValue"]),ue]),_:1}),l(r,{label:"\u542F\u7528\u72B6\u6001",prop:"isDisable"},{default:t(()=>[l(_,{modelValue:a(u).isDisable,"onUpdate:modelValue":e[7]||(e[7]=o=>a(u).isDisable=o)},{default:t(()=>[l(m,{label:0},{default:t(()=>[F("\u542F\u7528")]),_:1}),l(m,{label:1},{default:t(()=>[F("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{re as _};
