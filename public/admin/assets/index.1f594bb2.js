import{e as K,q as L,s as q,aW as I,b2 as M,be as Z,bf as z,b3 as O,bh as W,bu as X,b4 as Y,b5 as G,b6 as H,o as s,g as J,h as e,w as a,u as l,a$ as Q,Z as n,j as y,C as ee,k as d,y as g,m as h,V as ae,am as w,aX as te,aY as le,ab as ne,aZ as ue,b1 as oe}from"./.pnpm.aa9acb74.js";import{u as se,_ as ie}from"./usePaging.360c2585.js";import{f as de,_ as ce}from"./index.83cc6034.js";import{r as _e,b as me}from"./package.14147aa6.js";import{_ as re}from"./edit.vue_vue_type_script_setup_true_lang.705d3602.js";import"./index.6fbe50e6.js";import"./index.vue_vue_type_style_index_0_scoped_a5e5144a_lang.4d85850e.js";const pe=y("br",null,null,-1),fe={class:"flex"},be={class:"mt-4"},he={class:"flex justify-end mt-4"},we=K({__name:"index",setup(ye){const F=L(!1),p=q(),c=I({name:"",type:"",isDisable:-1}),x=async()=>{var i;F.value=!0,await w(),(i=p.value)==null||i.open("add")},B=async i=>{var u,f;F.value=!0,await w(),(u=p.value)==null||u.open("edit"),(f=p.value)==null||f.setFormData(i)},V=async i=>{await de.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await _e({id:i}),m()},{pager:_,getLists:m,resetPage:v,resetParams:P}=se({fetchFun:me,params:c});return M(()=>{m()}),m(),(i,u)=>{const f=te,k=le,E=Z,A=z,r=ne,T=ue,C=oe,$=ce,o=O,b=W,R=X,D=Y,j=G,N=ie,S=H;return s(),J("div",null,[e(C,{class:"!border-none",shadow:"never"},{default:a(()=>[e(T,{ref:"formRef",class:"mb-[-16px]",model:l(c),inline:!0},{default:a(()=>[e(k,{label:"\u5957\u9910\u540D"},{default:a(()=>[e(f,{class:"w-[280px]",modelValue:l(c).name,"onUpdate:modelValue":u[0]||(u[0]=t=>l(c).name=t),placeholder:"",clearable:"",onKeyup:Q(l(v),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,{label:"\u72B6\u6001"},{default:a(()=>[e(A,{class:"w-[280px]",modelValue:l(c).isDisable,"onUpdate:modelValue":u[1]||(u[1]=t=>l(c).isDisable=t)},{default:a(()=>[e(E,{label:"\u5168\u90E8",value:-1}),e(E,{label:"\u6B63\u5E38",value:0}),e(E,{label:"\u7981\u7528",value:1})]),_:1},8,["modelValue"])]),_:1}),pe,e(k,null,{default:a(()=>[e(r,{type:"primary",onClick:l(v)},{default:a(()=>[n("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(r,{onClick:l(P)},{default:a(()=>[n("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[y("div",fe,[e(r,{type:"success",onClick:x},{icon:a(()=>[e($,{name:"el-icon-Plus"})]),default:a(()=>[n(" \u6DFB\u52A0 ")]),_:1})]),y("div",be,[ee((s(),d(j,{size:"large",data:l(_).lists,height:"600",style:{width:"100%"}},{default:a(()=>[e(o,{label:"\u5957\u9910\u540D",prop:"name",sortable:"","min-width":"120"}),e(o,{label:"\u5957\u9910\u4EF7\u683C","min-width":"150"},{default:a(({row:t})=>[n(g(t.price)+"/",1),e(b,{tag:"del"},{default:a(()=>[n(g(t.marketPrice),1)]),_:2},1024)]),_:1}),e(o,{label:"\u5305\u542B\u79EF\u5206",prop:"totalPoints",sortable:"","min-width":"120"}),e(o,{label:"\u6709\u6548\u671F","min-width":"80"},{default:a(({row:t})=>[t.duration==0?(s(),d(b,{key:0,class:"mx-1"},{default:a(()=>[n("\u6C38\u4E45")]),_:1})):h("",!0),t.duration>0?(s(),d(b,{key:1,class:"mx-1"},{default:a(()=>[n(g(t.duration)+"\u5929",1)]),_:2},1024)):h("",!0)]),_:1}),e(o,{label:"\u663E\u793A\u987A\u5E8F",prop:"sort",sortable:"","min-width":"120"}),e(o,{label:"\u8D2D\u4E70\u65B9\u5F0F","min-width":"100"},{default:a(({row:t})=>[t.buyMethod==="online"?(s(),d(b,{key:0},{default:a(()=>[n("\u5728\u7EBF\u652F\u4ED8")]),_:1})):h("",!0),t.buyMethod==="jump"?(s(),d(R,{key:1,type:"info",underline:!1,href:t.jumpUrl},{default:a(()=>[n("\u8DF3\u8F6C\u53D1\u5361\u7AD9")]),_:2},1032,["href"])):h("",!0)]),_:1}),e(o,{label:"\u542F\u7528\u72B6\u6001","min-width":"100"},{default:a(({row:t})=>[t.isDisable===0?(s(),d(D,{key:0,type:"success"},{default:a(()=>[n("\u542F\u7528")]),_:1})):(s(),d(D,{key:1,type:"danger"},{default:a(()=>[n("\u7981\u7528")]),_:1}))]),_:1}),e(o,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:a(({row:t})=>[e(r,{type:"primary",link:"",onClick:U=>B(t)},{default:a(()=>[n(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(r,{type:"danger",link:"",onClick:U=>V(t.id)},{default:a(()=>[n(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,l(_).loading]]),y("div",he,[e(N,{modelValue:l(_),"onUpdate:modelValue":u[2]||(u[2]=t=>ae(_)?_.value=t:null),onChange:l(m)},null,8,["modelValue","onChange"])])])]),_:1}),e(re,{ref_key:"editRef",ref:p,onSuccess:l(m)},null,8,["onSuccess"])])}}});export{we as default};
