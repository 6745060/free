import{e as x,s as B,aW as K,f as O,b9 as Y,ba as N,o as F,g as A,h as t,w as s,u as l,j as n,Z as _,y as C,k as U,m as b,aY as I,aX as T,aZ as G}from"./.pnpm.aa9acb74.js";import{r as E}from"./index.83cc6034.js";import{P}from"./index.6fbe50e6.js";function ee(){return E.get({url:"/setting/storage/list"})}function Z(d){return E.post({url:"/setting/storage/edit",params:d})}function j(d){return E.get({url:"/setting/storage/detail",params:d})}const L={class:"edit-popup"},W={class:"form-tips"},X={key:0},z={class:"flex-1"},H={class:"flex-1"},J=n("div",{class:"form-tips"}," \u8BF7\u8865\u5168http://\u6216https://\uFF0C\u4F8B\u5982https://static.cloud.com ",-1),ue=x({__name:"edit",emits:["success"],setup(d,{expose:y,emit:S}){const p=B(),c=B(),u=K({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0}),k=[{name:"\u672C\u5730\u5B58\u50A8",type:"local",tips:"\u672C\u5730\u5B58\u50A8\u65B9\u5F0F\u4E0D\u9700\u8981\u914D\u7F6E\u5176\u4ED6\u53C2\u6570"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:"qiniu",tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],D={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],access_key:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},g=O(()=>k.find(o=>o.type==u.engine)),V=async()=>{var o,e;await((o=p.value)==null?void 0:o.validate()),await Z(u),(e=c.value)==null||e.close(),S("success")},v=async()=>{const o=await j({engine:u.engine});for(const e in o)u[e]=o[e]},R=o=>{var e;u.engine=o,(e=c.value)==null||e.open(),v()},h=()=>{var o;(o=p.value)==null||o.resetFields()};return y({open:R}),(o,e)=>{const m=Y,r=I,i=T,q=N,w=G;return F(),A("div",L,[t(P,{ref_key:"popupRef",ref:c,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",onConfirm:V,onClose:h},{default:s(()=>[t(w,{ref_key:"formRef",ref:p,model:l(u),"label-width":"120px",rules:D},{default:s(()=>[t(r,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"engine"},{default:s(()=>{var a;return[n("div",null,[t(m,{"model-value":""},{default:s(()=>{var f;return[_(C((f=l(g))==null?void 0:f.name),1)]}),_:1}),n("div",W,C((a=l(g))==null?void 0:a.tips),1)])]}),_:1}),l(u).engine!=="local"?(F(),A("div",X,[t(r,{label:" \u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",prop:"bucket"},{default:s(()=>[n("div",z,[t(i,{modelValue:l(u).bucket,"onUpdate:modelValue":e[0]||(e[0]=a=>l(u).bucket=a),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)",clearable:""},null,8,["modelValue"])])]),_:1}),t(r,{label:"ACCESS_KEY",prop:"access_key"},{default:s(()=>[t(i,{modelValue:l(u).access_key,"onUpdate:modelValue":e[1]||(e[1]=a=>l(u).access_key=a),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"SECRET_KEY",prop:"secret_key"},{default:s(()=>[t(i,{modelValue:l(u).secret_key,"onUpdate:modelValue":e[2]||(e[2]=a=>l(u).secret_key=a),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:s(()=>[n("div",H,[n("div",null,[t(i,{modelValue:l(u).domain,"onUpdate:modelValue":e[3]||(e[3]=a=>l(u).domain=a),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)",clearable:""},null,8,["modelValue"])]),J])]),_:1}),l(u).engine=="qcloud"?(F(),U(r,{key:0,label:"REGION",prop:"region"},{default:s(()=>[t(i,{modelValue:l(u).region,"onUpdate:modelValue":e[4]||(e[4]=a=>l(u).region=a),placeholder:"\u8BF7\u8F93\u5165region",clearable:""},null,8,["modelValue"])]),_:1})):b("",!0)])):b("",!0),t(r,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[t(q,{modelValue:l(u).status,"onUpdate:modelValue":e[5]||(e[5]=a=>l(u).status=a)},{default:s(()=>[t(m,{label:0},{default:s(()=>[_("\u5173\u95ED")]),_:1}),t(m,{label:1},{default:s(()=>[_("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{ue as _,ee as s};
