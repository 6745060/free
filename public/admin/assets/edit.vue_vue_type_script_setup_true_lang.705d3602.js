import{e as U,q as v,f as P,s as b,aW as q,b9 as j,ba as w,o as g,g as x,h as l,w as t,u as a,Z as m,k as R,m as h,j as n,aX as M,aY as N,aZ as I}from"./.pnpm.aa9acb74.js";import{a as S,s as T}from"./package.14147aa6.js";import{P as Z}from"./index.6fbe50e6.js";import{f as G}from"./index.83cc6034.js";const W={class:"edit-popup"},X=n("div",{class:"form-tips"},"\u5355\u4F4D\u5929\uFF0C\u8F93\u51650\u4EE3\u8868\u6C38\u4E45\u6709\u6548",-1),Y={class:"flex-1"},z=n("div",{class:"form-tips"},"\u6570\u503C\u8D8A\u5927\u8D8A\u9760\u524D",-1),Q=U({__name:"edit",emits:["success"],setup(H,{expose:E,emit:B}){const c=v("add"),V=P(()=>c.value=="edit"?"\u7F16\u8F91\u5957\u9910":"\u6DFB\u52A0\u5957\u9910"),p=b(),F=b(),u=q({id:0,type:"tokens",name:"",marketPrice:"",price:"",desc:"",buyMethod:"jump",jumpUrl:"",totalPoints:"100",duration:"30",sort:"100",isDisable:0}),_={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5957\u9910\u540D\u79F0",trigger:"blur"}],marketPrice:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E02\u573A\u4EF7",trigger:"blur"}],price:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F18\u60E0\u4EF7",trigger:"blur"}],totalPoints:[{required:!0,message:"\u8BF7\u8F93\u5165\u5305\u542B\u603B\u79EF\u5206",trigger:"blur"}],buyMethod:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u552E\u65B9\u5F0F",trigger:"blur"}],jumpUrl:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u94FE\u63A5",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F\u6570\u5B57",trigger:"blur"}],desc:[{required:!0,message:"\u8BF7\u8F93\u5165\u5957\u9910\u7B80\u4ECB",trigger:"blur"}],duration:[{required:!0,message:"\u8BF7\u8F93\u5165\u6709\u6548\u5929\u6570",trigger:"blur"}],isDisable:[{required:!0,message:"\u8BF7\u9009\u62E9\u5957\u9910\u72B6\u6001",trigger:"blur"}]},D=async s=>{const e=await S({id:s.id});for(const r in u)e[r]!=null&&e[r]!=null&&(u[r]=e[r])},C=async()=>{var s,e;await((s=p.value)==null?void 0:s.validate()),await T(u),(e=F.value)==null||e.close(),B("success"),G.msgSuccess("\u64CD\u4F5C\u6210\u529F")},k=(s="add")=>{var e;c.value=s,(e=F.value)==null||e.open()},A=()=>{var s;(s=p.value)==null||s.resetFields()};return E({open:k,setFormData:D}),(s,e)=>{const r=M,d=N,i=j,f=w,y=I;return g(),x("div",W,[l(Z,{ref_key:"popupRef",ref:F,async:!0,title:a(V),width:"550px",onClose:A,onConfirm:C},{default:t(()=>[l(y,{ref_key:"formRef",ref:p,model:a(u),rules:_,"label-width":"100px"},{default:t(()=>[l(d,{label:"\u5957\u9910\u540D\u79F0",prop:"name"},{default:t(()=>[l(r,{modelValue:a(u).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(u).name=o),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5E02\u573A\u4EF7",prop:"marketPrice"},{default:t(()=>[l(r,{modelValue:a(u).marketPrice,"onUpdate:modelValue":e[1]||(e[1]=o=>a(u).marketPrice=o),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u4F18\u60E0\u4EF7",prop:"price"},{default:t(()=>[l(r,{modelValue:a(u).price,"onUpdate:modelValue":e[2]||(e[2]=o=>a(u).price=o),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5305\u542B\u79EF\u5206",prop:"totalPoints"},{default:t(()=>[l(r,{modelValue:a(u).totalPoints,"onUpdate:modelValue":e[3]||(e[3]=o=>a(u).totalPoints=o),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u8D2D\u4E70\u65B9\u5F0F",prop:"buyMethod"},{default:t(()=>[l(f,{modelValue:a(u).buyMethod,"onUpdate:modelValue":e[4]||(e[4]=o=>a(u).buyMethod=o)},{default:t(()=>[l(i,{label:"jump"},{default:t(()=>[m("\u7B2C\u4E09\u65B9\u53D1\u5361\u7F51\u7AD9")]),_:1}),l(i,{disabled:"",label:"online"},{default:t(()=>[m("\u5728\u7EBF\u652F\u4ED8(\u5373\u5C06\u652F\u6301)")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u).buyMethod==="jump"?(g(),R(d,{key:0,label:"\u8DF3\u8F6C\u94FE\u63A5",prop:"jumpUrl"},{default:t(()=>[l(r,{modelValue:a(u).jumpUrl,"onUpdate:modelValue":e[5]||(e[5]=o=>a(u).jumpUrl=o),clearable:"",placeholder:"\u8F93\u5165\u7B2C\u4E09\u65B9\u53D1\u5361\u7F51\u7AD9\u94FE\u63A5\uFF0C\u5305\u542B\u534F\u8BAE\u5982\uFF1Ahttps://"},null,8,["modelValue"])]),_:1})):h("",!0),l(d,{label:"\u6709\u6548\u671F",prop:"duration"},{default:t(()=>[l(r,{modelValue:a(u).duration,"onUpdate:modelValue":e[6]||(e[6]=o=>a(u).duration=o),clearable:"",placeholder:""},null,8,["modelValue"]),X]),_:1}),l(d,{label:"\u5957\u9910\u7B80\u4ECB",prop:"desc"},{default:t(()=>[n("div",Y,[n("div",null,[l(r,{modelValue:a(u).desc,"onUpdate:modelValue":e[7]||(e[7]=o=>a(u).desc=o),rows:2,clearable:"",placeholder:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),l(d,{label:"\u5C55\u793A\u987A\u5E8F",prop:"sort"},{default:t(()=>[l(r,{modelValue:a(u).sort,"onUpdate:modelValue":e[8]||(e[8]=o=>a(u).sort=o),clearable:"",placeholder:"\u6570\u503C\u8D8A\u5927\u8D8A\u9760\u524D"},null,8,["modelValue"]),z]),_:1}),l(d,{label:"\u542F\u7528\u72B6\u6001",prop:"isDisable"},{default:t(()=>[l(f,{modelValue:a(u).isDisable,"onUpdate:modelValue":e[9]||(e[9]=o=>a(u).isDisable=o)},{default:t(()=>[l(i,{label:0},{default:t(()=>[m("\u542F\u7528")]),_:1}),l(i,{label:1},{default:t(()=>[m("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Q as _};
